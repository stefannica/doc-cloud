<?xml version="1.0"?>
<!DOCTYPE section [
 <!ENTITY % entities SYSTEM "entities.ent"> %entities;
]>
<!---->
<section xmlns="http://docbook.org/ns/docbook" xmlns:xi="http://www.w3.org/2001/XInclude" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="topic_rdf_hkp_rt"><title><phrase><phrase><phrase><phrase>[[[kw-hos-tm]]] [[[kw-hos-version-50]]]: </phrase></phrase></phrase></phrase>Customizing Swift Service Configuration Files </title>
    <!---->
    <para><para xml:id="idg-all-planning-objectstorage-modify_swift_service_config_files-xml-4"><phrase><phrase/></phrase></para></para>

    <sidebar xml:id="idg-all-planning-objectstorage-modify_swift_service_config_files-xml-6"><para>[[[kw-hos-phrase]]] enables you to modify various Swift service configuration
        files. The following Swift service configuration files are located on the lifecycle manager
        in the <literal>~/helion/my_cloud/config/swift/</literal> directory:</para>
<itemizedlist>
        <listitem><para><literal>account-server.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>container-reconciler.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>container-server.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>container-sync-realms.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>object-expirer.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>object-server.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>proxy-server.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>rsyncd.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>swift.conf.j2</literal></para>
</listitem>
        <listitem><para><literal>swift-recon.j2</literal></para>
</listitem>
      </itemizedlist><para>There are many configuration options that can be set or changed, including <emphasis role="bold">container
          rate limit</emphasis> and <emphasis role="bold">logging level</emphasis>:</para>
</sidebar>
    <para>
      Expand All Sections
      Collapse All Sections
    </para>

    <formalpara xml:id="configuring-swift-contianer-rate-limit"><title>Configuring
        Swift Container Rate Limit</title><para><para>The Swift container rate limit allows you to limit the number of <emphasis role="bold">PUT</emphasis> and
            <emphasis role="bold">DELETE</emphasis> requests of an object based on the number of objects in a container. For
          example, suppose the <emphasis role="bold">container_ratelimit_x = r </emphasis>. It means that for containers of
          size <emphasis role="bold">x</emphasis>, limit requests per second to <emphasis role="bold">r</emphasis>.</para><para>To enable container rate
          limiting:</para></para>
<orderedlist xml:id="ol_a23_tlp_rt">
          <listitem><para>Log in to the lifecycle manager.</para>
</listitem>
          <listitem><para>Edit the <emphasis role="bold">DEFAULT</emphasis> section of
              <literal>~/helion/my_cloud/config/swift/proxy-server.conf.j2</literal>:</para>
<screen>container_ratelimit_0 = 100
container_ratelimit_1000000 = 100
container_ratelimit_5000000 = 50</screen><para>This
            will set the <emphasis role="bold">PUT</emphasis> and <emphasis role="bold">DELETE</emphasis> object rate limit to 100 requests per second
            for containers with up to 1,000,000 objects. Also, the <emphasis role="bold">PUT</emphasis> and <emphasis role="bold">DELETE</emphasis> rate
            for containers with between 1,000,000 and 5,000,000 objects will vary linearly from
            between 100 and 50 requests per second as the container object count increases.</para>
</listitem>
          <listitem><para>Commit your changes to
            git:</para>
<screen>cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</screen></listitem>
          <listitem><para>Run the configuration
            processor:</para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</screen></listitem>
          <listitem><para>Create a deployment
            directory:</para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</screen></listitem>
          <listitem><para>Run the <literal>swift-reconfigure.yml</literal> playbook to reconfigure the Swift
            servers:</para>
<screen>cd ~/scratch/ansible/next/hos/ansible 
ansible-playbook -i hosts/verb_hosts swift-reconfigure.yml</screen></listitem>
        </orderedlist>
</formalpara>
    <formalpara xml:id="modifying-swift-account-server-logging-level"><title>Configuring Swift Account Server Logging Level</title><para><para>By default the Swift logging level is set to <emphasis role="bold">INFO</emphasis>. </para><para>Perform the following steps to set
          the logging level of the <literal>account-server</literal> to <emphasis role="bold">DEBUG</emphasis>:</para></para>
<orderedlist>
          <listitem><para>Log in to the lifecycle manager.</para>
</listitem>
          <listitem><para>Edit the <emphasis role="bold">DEFAULT</emphasis> section of
              <literal>~/helion/my_cloud/config/swift/account-server.conf.j2</literal>:
            </para>
<screen>[DEFAULT]
.
.
log_level = DEBUG</screen></listitem>
          <listitem><para>Commit your changes to
            git:</para>
<screen>cd ~/helion/hos/ansible
git add -A
git commit -m "&lt;commit message&gt;"</screen></listitem>
          <listitem><para>Run the configuration
            processor:</para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost config-processor-run.yml</screen></listitem>
          <listitem><para>Create a deployment
            directory:</para>
<screen>cd ~/helion/hos/ansible
ansible-playbook -i hosts/localhost ready-deployment.yml</screen></listitem>
          <listitem><para>Run the <literal>swift-reconfigure.yml</literal> playbook to reconfigure the Swift
            servers:</para>
<screen>cd ~/scratch/ansible/next/hos/ansible 
ansible-playbook -i hosts/verb_hosts swift-reconfigure.yml</screen></listitem>
        </orderedlist>
<para><para>For more information, see <!---->  .</para></para>
</formalpara>
  </section>
